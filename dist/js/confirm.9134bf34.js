"use strict";(self["webpackChunkshop2"]=self["webpackChunkshop2"]||[]).push([[368],{2281:function(a,t,d){d.r(t),d.d(t,{default:function(){return P}});var l=d(3396),s=d(7139);const e=a=>((0,l.dD)("data-v-7a797b05"),a=a(),(0,l.Cn)(),a),o={class:"row"},r={class:"col-xl-8 mb-3"},c={class:"card"},i={class:"card-body"},n=e((()=>(0,l._)("div",{class:"text-start mb-3"},[(0,l._)("label",{class:"labels fw-bold text-black-50"},"فاکتور خرید"),(0,l._)("hr",{class:"mb-4",style:{"margin-top":"-2px",color:"#dddddd"}})],-1))),b={class:"row"},v={class:"col-12 table-responsive px-md-5"},m={class:"table text-start"},u={style:{width:"120px"}},p=["src"],f={style:{direction:"rtl"}},_={class:"fw-bold"},y=(0,l.Uk)(" - "),h={style:{width:"50px"}},w={key:0},g={key:1},x={class:"border-top"},k=e((()=>(0,l._)("td",{class:"fw-bold pt-5",colspan:"2"},[(0,l._)("i",{class:"bi bi-heart-fill",style:{color:"hotpink"}}),(0,l.Uk)(" با تشکر از خرید شما ")],-1))),z={class:"fw-bold pt-5",colspan:"4"},A=e((()=>(0,l._)("p",{class:""}," هزینه ارسال : 15000 ",-1))),E={class:"mb-0"},I={class:"col-xl-4 mb-3"},q={class:"card"},B={class:"card-body"},D=e((()=>(0,l._)("div",{class:"text-start mb-3"},[(0,l._)("label",{class:"labels fw-bold text-black-50"},"نشانی پستی"),(0,l._)("hr",{class:"mb-4",style:{"margin-top":"-2px",color:"#dddddd"}})],-1))),H={class:"row"},O={class:"row"},T={class:"col-8 mb-3 text-start"},C=["selected","value"],S=e((()=>(0,l._)("div",{class:"form-text error"},null,-1))),Y=e((()=>(0,l._)("p",{id:"stateAdd"},null,-1))),J=e((()=>(0,l._)("p",{id:"cityAdd"},null,-1))),K=e((()=>(0,l._)("p",{id:"codeAdd"},null,-1))),N=e((()=>(0,l._)("p",{id:"addAdd"},null,-1))),U={class:"col-12"},L=(0,l.uE)('<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" data-v-7a797b05><div class="modal-dialog modal-dialog-centered modal-xl" data-v-7a797b05><div class="modal-content" data-v-7a797b05><div class="modal-body pb-0" data-v-7a797b05><div class="mb-3" data-v-7a797b05><div class="card" data-v-7a797b05><div class="card-body pb-0" data-v-7a797b05><div class="text-start mb-3" data-v-7a797b05><label class="labels fw-bold text-black-50" data-v-7a797b05>ثبت نشانی جدید</label><hr class="mb-4" style="margin-top:-2px;color:#dddddd;" data-v-7a797b05><div data-v-7a797b05><div class="row" data-v-7a797b05><div class="col-3" data-v-7a797b05><label for="title" class="form-label" data-v-7a797b05>عنوان</label><input type="text" class="form-control form-control-sm" id="title" required="" data-v-7a797b05><div class="form-text error" data-v-7a797b05></div></div><div class="col-3" data-v-7a797b05><label for="state" class="form-label" data-v-7a797b05>استان</label><input type="text" class="form-control form-control-sm" id="state" required="" data-v-7a797b05><div class="form-text error" data-v-7a797b05></div></div><div class="col-3" data-v-7a797b05><label for="city" class="form-label" data-v-7a797b05>شهر</label><input type="text" class="form-control form-control-sm" id="city" required="" data-v-7a797b05><div class="form-text error" data-v-7a797b05></div></div><div class="col-3" data-v-7a797b05><label for="postal_code" class="form-label" data-v-7a797b05>کد پستی</label><input type="text" class="form-control form-control-sm" id="postal_code" required="" data-v-7a797b05><div class="form-text error" data-v-7a797b05></div></div><div class="my-2 col-12" data-v-7a797b05><label for="address" class="form-label" data-v-7a797b05>نشانی</label><textarea class="form-control form-control-sm" id="address" rows="2" required="" data-v-7a797b05></textarea><div class="form-text error" data-v-7a797b05></div></div></div></div></div><div class="row" data-v-7a797b05></div></div></div></div></div><div class="modal-footer border-0" data-v-7a797b05><button class="btn btn-sm btn-dark" data-bs-dismiss="modal" data-v-7a797b05>ثبت نشانی</button><button class="btn btn-sm btn-secondary" data-bs-dismiss="modal" data-v-7a797b05>انصراف</button></div></div></div></div>',1);function Z(a,t,d,e,Z,j){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",o,[(0,l._)("div",r,[(0,l._)("div",c,[(0,l._)("div",i,[n,(0,l._)("div",b,[(0,l._)("div",v,[(0,l._)("table",m,[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cart.items,(a=>((0,l.wg)(),(0,l.iD)("tr",null,[(0,l._)("td",u,[(0,l._)("img",{style:{width:"120px",height:"auto"},src:"http://localhost:8000"+a.product.images[0],alt:""},null,8,p)]),(0,l._)("td",f,[(0,l._)("div",null,[(0,l._)("p",_,(0,s.zw)(a.product.title),1),(0,l._)("small",null,(0,s.zw)(a.size.size),1),y,(0,l._)("small",null,(0,s.zw)(a.size.color_name),1)])]),(0,l._)("td",h,(0,s.zw)(a.quantity),1),(0,l._)("td",null,(0,s.zw)(a.price)+"T",1),a.off?((0,l.wg)(),(0,l.iD)("td",w,(0,s.zw)(a.price*a.off/100*-1)+"T",1)):((0,l.wg)(),(0,l.iD)("td",g)),(0,l._)("td",null,(0,s.zw)(a.quantity*a.price*(1-a.off/100))+" T",1)])))),256)),(0,l._)("tr",x,[k,(0,l._)("td",z,[(0,l._)("p",null," تخفیف : "+(0,s.zw)(e.off),1),A,(0,l._)("p",E," پرداخت شما : "+(0,s.zw)(e.cart.amount),1)])])])])])])])])]),(0,l._)("div",I,[(0,l._)("div",q,[(0,l._)("div",B,[D,(0,l._)("div",H,[(0,l._)("div",O,[(0,l._)("div",T,[(0,l._)("select",{class:"form-select form-select-sm",id:"address1",required:"",onChange:t[0]||(t[0]=(...a)=>e.showAdd&&e.showAdd(...a))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.user.addresses,(a=>((0,l.wg)(),(0,l.iD)("option",{selected:a.id==e.cart.address_id,value:a.id},(0,s.zw)(a.title),9,C)))),256))],32),S]),Y,J,K,N])])])])]),(0,l._)("div",U,[(0,l._)("button",{class:"bn btn-lg btn-dark mb-3",onClick:t[1]||(t[1]=a=>e.payOrder(e.cart.id))},"تایید و پرداخت")])]),L],64)}var j=d(4870),F={name:"Confirm",setup(){const a=(0,j.iH)({}),t=(0,j.iH)({}),d=(0,j.iH)(0),s=(0,j.iH)({});(0,l.bv)((()=>{e()}));const e=()=>{axios.get("https://panel.shop2.webagent.ir/api/user/"+JSON.parse(localStorage.getItem("user")).id).then((d=>{a.value=d.data,localStorage.setItem("user",JSON.stringify(d.data)),console.log(d.data),console.log(d.data.allOrders),d.data.allOrders.forEach((a=>{"سبد خرید"==a.status&&(t.value=a)}))})).then((()=>{o();let a=0;t.value.items.forEach((t=>{let d=t.quantity*t.price*t.off/100;a+=d})),d.value=a,console.log(d.value,amount.value)})).catch()},o=()=>{axios.get("http://localhost:8000/api/address/user/"+document.getElementById("address1").value).then((a=>{console.log(a.data);let t=a.data;document.getElementById("stateAdd").innerText=t.city.state.name,document.getElementById("cityAdd").innerText=t.city.name,document.getElementById("codeAdd").innerText="کد پستی "+t.postal_code,document.getElementById("addAdd").innerText=t.address})).then((()=>{r()})).catch(),console.log("add",document.getElementById("address1").value)},r=()=>{axios.post("http://localhost:8000/api/order/"+t.value.id,{user_address_id:document.getElementById("address1").value}).then((a=>{console.log(a.data)})).catch()},c=a=>{axios.post("http://localhost:8000/api/pay/order/"+a).then((a=>{console.log(a.data),window.location=a.data.url}))};return{getData:e,user:a,cart:t,address:s,showAdd:o,updateOrderAdd:r,off:d,payOrder:c}}},G=d(89);const M=(0,G.Z)(F,[["render",Z],["__scopeId","data-v-7a797b05"]]);var P=M}}]);
//# sourceMappingURL=confirm.9134bf34.js.map