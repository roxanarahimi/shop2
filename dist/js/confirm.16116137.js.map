{"version":3,"file":"js/confirm.16116137.js","mappings":"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","sources":["webpack://shop2/./src/views/Confirm.vue","webpack://shop2/./src/views/Confirm.vue?5f37"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-xl-8 mb-3\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"text-start mb-3\">\r\n            <label class=\"labels fw-bold text-black-50\">فاکتور خرید</label>\r\n            <hr class=\" mb-4\" style=\"margin-top: -2px;color: #dddddd\">\r\n          </div>\r\n          <div class=\"row\">\r\n\r\n            <div class=\"col-12 table-responsive px-md-5\">\r\n              <table class=\"table text-start\">\r\n                <tbody>\r\n                <tr v-for=\"item in cart.items\">\r\n                  <td style=\"width: 120px\">\r\n                    <img style=\"width: 120px; height: auto\" :src=\"'http://localhost:8000'+ item.product.images[0]\" alt=\"\">\r\n                  </td>\r\n                  <td style=\"direction: rtl\">\r\n                    <div>\r\n                      <p class=\"fw-bold\">{{ item.product.title }}</p>\r\n                      <small>{{ item.size.size }}</small> -\r\n                      <small>{{ item.size.color_name }}</small>\r\n                    </div>\r\n                  </td>\r\n                  <td style=\"width: 50px\">{{ item.quantity }}</td>\r\n                  <td>{{ item.price }}T</td>\r\n                  <td v-if=\"item.off\">{{ item.price * item.off / 100 * -1 }}T</td>\r\n                  <td v-else></td>\r\n                  <td>{{ item.quantity * item.price * (1 - (item.off / 100)  ) }} T</td>\r\n                </tr>\r\n                <tr class=\"border-top\">\r\n\r\n                  <td class=\"fw-bold pt-5\" colspan=\"2\">\r\n                    <i class=\"bi bi-heart-fill\" style=\"color: hotpink\"></i>\r\n                    با تشکر از خرید شما\r\n                  </td>\r\n                  <td class=\"fw-bold pt-5\" colspan=\"4\">\r\n                    <p> تخفیف  : {{ off }}</p>\r\n                    <p class=\"\"> هزینه ارسال  : 15000 </p>\r\n                    <p class=\" mb-0\"> پرداخت شما  : {{ cart.amount}} </p>\r\n\r\n                  </td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-xl-4 mb-3 \">\r\n      <div class=\"card \">\r\n        <div class=\"card-body\">\r\n          <div class=\"text-start mb-3\">\r\n            <label class=\"labels fw-bold text-black-50\">نشانی پستی</label>\r\n            <hr class=\" mb-4\" style=\"margin-top: -2px;color: #dddddd\">\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"row\">\r\n              <div class=\"col-8 mb-3 text-start\">\r\n<!--                <label for=\"title\" class=\"form-label\">عنوان</label>-->\r\n                <select class=\"form-select form-select-sm\" id=\"address1\" required=\"\" @change=\"showAdd\">\r\n                  <option v-for=\"item in user.addresses\" :selected=\"item.id == cart.address_id\" :value=\"item.id\">{{  item.title }}</option>\r\n                </select>\r\n\r\n                <div class=\"form-text error\"></div>\r\n              </div>\r\n              <p id=\"stateAdd\"></p>\r\n              <p id=\"cityAdd\"></p>\r\n              <p id=\"codeAdd\"></p>\r\n              <p id=\"addAdd\"></p>\r\n\r\n\r\n<!--              <div class=\"text-end\">-->\r\n<!--                <button class=\"btn btn-sm btn-dark\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">نشانی جدید</button>-->\r\n<!--              </div>-->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-12\">\r\n      <button class=\"bn btn-lg btn-dark mb-3\" @click=\"payOrder(cart.id)\">تایید و پرداخت</button>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <!-- Modal -->\r\n  <div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered modal-xl\">\r\n      <div class=\"modal-content\">\r\n<!--        <div class=\"modal-header\">-->\r\n<!--          <h5 class=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>-->\r\n<!--          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>-->\r\n<!--        </div>-->\r\n        <div class=\"modal-body pb-0\">\r\n          <div class=\" mb-3\">\r\n            <div class=\"card\">\r\n              <div class=\"card-body pb-0\">\r\n                <div class=\"text-start mb-3\">\r\n                  <label class=\"labels fw-bold text-black-50\">ثبت نشانی جدید</label>\r\n                  <hr class=\" mb-4\" style=\"margin-top: -2px;color: #dddddd\">\r\n                  <div>\r\n                    <div class=\"row\">\r\n                      <div class=\"col-3\">\r\n                        <label for=\"title\" class=\"form-label\">عنوان</label>\r\n                        <input type=\"text\" class=\"form-control form-control-sm\" id=\"title\" required=\"\">\r\n                        <div class=\"form-text error\"></div>\r\n                      </div>\r\n                      <div class=\"col-3\">\r\n                        <label for=\"state\" class=\"form-label\">استان</label>\r\n                        <input type=\"text\" class=\"form-control form-control-sm\" id=\"state\" required=\"\">\r\n                        <div class=\"form-text error\"></div>\r\n                      </div>\r\n                      <div class=\"col-3\"><label for=\"city\" class=\"form-label\">شهر</label>\r\n                        <input type=\"text\" class=\"form-control form-control-sm\" id=\"city\" required=\"\">\r\n                        <div class=\"form-text error\"></div>\r\n                      </div>\r\n                      <div class=\"col-3\">\r\n                        <label for=\"postal_code\" class=\"form-label\">کد پستی</label>\r\n                        <input type=\"text\" class=\"form-control form-control-sm\" id=\"postal_code\" required=\"\">\r\n                        <div class=\"form-text error\"></div>\r\n                      </div>\r\n                      <div class=\"my-2 col-12\">\r\n                        <label for=\"address\" class=\"form-label\">نشانی</label>\r\n                        <textarea class=\"form-control form-control-sm\" id=\"address\" rows=\"2\" required=\"\"></textarea>\r\n                        <div class=\"form-text error\"></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer border-0\">\r\n          <button class=\"btn btn-sm btn-dark\" data-bs-dismiss=\"modal\">ثبت نشانی</button>\r\n          <button class=\"btn btn-sm btn-secondary\" data-bs-dismiss=\"modal\">انصراف</button>\r\n\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref} from \"vue\";\r\n\r\nexport default {\r\n  name: \"Confirm\",\r\n  setup(){\r\n    const user = ref({});\r\n    const cart = ref({});\r\n    const off = ref(0);\r\n    const address = ref({});\r\n    onMounted(()=>{\r\n      getData();\r\n\r\n    })\r\n    const getData = () => {\r\n      axios.get('https://panel.shop2.webagent.ir/api/user/' + JSON.parse(localStorage.getItem('user')).id)\r\n          .then((response) => {\r\n            user.value = response.data;\r\n            localStorage.setItem('user', JSON.stringify(response.data));\r\n            console.log(response.data)\r\n            console.log(response.data.allOrders);\r\n            response.data.allOrders.forEach((order)=>{\r\n              if (order.status == 'سبد خرید'){\r\n                cart.value = order;\r\n              }\r\n            })\r\n\r\n          })\r\n      .then(()=>{\r\n        showAdd();\r\n\r\n        let totalOff = 0;\r\n        cart.value.items.forEach((item)=>{\r\n          let off = item.quantity * item.price * item.off/100;\r\n          totalOff += off;\r\n        })\r\n\r\n        off.value = totalOff;\r\n        console.log( off.value, amount.value)\r\n      }).catch();\r\n\r\n    }\r\n    const showAdd = () => {\r\n      axios.get('http://localhost:8000/api/address/user/' + document.getElementById('address1').value)\r\n          .then((response)=>{\r\n            console.log(response.data)\r\n            let add = response.data;\r\n            document.getElementById('stateAdd').innerText= add.city.state.name;\r\n            document.getElementById('cityAdd').innerText= add.city.name;\r\n            document.getElementById('codeAdd').innerText= 'کد پستی ' + add.postal_code;\r\n            document.getElementById('addAdd').innerText= add.address;\r\n\r\n          }).then(()=>{\r\n        updateOrderAdd();\r\n      }).catch();\r\n\r\n\r\n\r\n          console.log('add',document.getElementById('address1').value)\r\n    };\r\n    const updateOrderAdd = () => {\r\n      axios.post('http://localhost:8000/api/order/' + cart.value.id,{\r\n        user_address_id: document.getElementById('address1').value\r\n      })\r\n          .then((response)=>{\r\n            console.log(response.data)\r\n          }).catch();\r\n };\r\n\r\n    const payOrder = (id)=>{\r\n      axios.post('http://localhost:8000/api/pay/order/'+ id)\r\n      .then((response)=>{\r\n        console.log(response.data)\r\n        window.location = response.data.url;\r\n      })\r\n      ;\r\n    }\r\n    return{\r\n      getData, user, cart, address, showAdd, updateOrderAdd,off, payOrder\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntd{\r\n  border: none;\r\n  vertical-align: bottom;\r\n  direction: ltr;\r\n}\r\n</style>","import { render } from \"./Confirm.vue?vue&type=template&id=7a797b05&scoped=true\"\nimport script from \"./Confirm.vue?vue&type=script&lang=js\"\nexport * from \"./Confirm.vue?vue&type=script&lang=js\"\n\nimport \"./Confirm.vue?vue&type=style&index=0&id=7a797b05&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\PROJECTS\\\\2022\\\\shop2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7a797b05\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","colspan","id","_hoisted_5","_createElementBlock","_Fragment","_renderList","$setup","items","item","src","product","images","alt","_toDisplayString","title","size","color_name","quantity","price","off","_hoisted_15","_hoisted_16","_hoisted_18","_hoisted_20","amount","_hoisted_25","required","onChange","addresses","selected","address_id","value","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","onClick","_hoisted_36","name","setup","user","ref","cart","address","onMounted","getData","axios","get","JSON","parse","localStorage","getItem","then","response","data","setItem","stringify","console","log","allOrders","forEach","order","status","showAdd","totalOff","catch","document","getElementById","add","innerText","city","state","postal_code","updateOrderAdd","post","user_address_id","payOrder","window","location","url","__exports__","render"],"sourceRoot":""}