"use strict";(self["webpackChunkshop2"]=self["webpackChunkshop2"]||[]).push([[511],{4519:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var s=a(3396),l=a(7139);const n=t=>((0,s.dD)("data-v-3dc19a54"),t=t(),(0,s.Cn)(),t),c={class:"row mb-3"},i={class:"col-12"},o={class:"card"},r={class:"card-body"},d=n((()=>(0,s._)("div",{class:"text-start mb-3"},[(0,s._)("label",{class:"labels fw-bold text-black-50"},"سبد خرید"),(0,s._)("hr",{class:"mb-4",style:{"margin-top":"-2px",color:"#dddddd"}})],-1))),u={class:"row"},m={class:"col-12 table-responsive px-md-5"},p={key:0,class:"table text-start"},_=n((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"}),(0,s._)("th",{scope:"col"}),(0,s._)("th",{scope:"col"},"عنوان"),(0,s._)("th",{scope:"col"},"رنگ"),(0,s._)("th",{scope:"col"},"سایز"),(0,s._)("th",{scope:"col",class:"text-center"},"تعداد"),(0,s._)("th",{scope:"col"},"مبلغ"),(0,s._)("th",{scope:"col"},"تخفیف"),(0,s._)("th",{scope:"col"})])],-1))),b=["src"],y={class:"text-center"},h=["onClick"],k=["id","value"],v=["onClick"],g={key:0},w={key:1},f=["onClick"],q={key:1},x={class:"d-flex justify-content-between"},C=(0,s.Uk)("ادامه خرید"),z=(0,s.Uk)("تایید سفارش");function D(t,e,a,n,D,I){const E=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",i,[(0,s._)("div",o,[(0,s._)("div",r,[d,(0,s._)("div",u,[(0,s._)("div",m,[0!=n.cart.items?((0,s.wg)(),(0,s.iD)("table",p,[_,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.cart.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e},[(0,s._)("th",null,(0,l.zw)(e+1),1),(0,s._)("td",null,[(0,s._)("img",{style:{width:"80px",height:"auto"},src:"http://localhost:8000"+t.product.images[0],alt:""},null,8,b)]),(0,s._)("td",null,(0,l.zw)(t.product.title),1),(0,s._)("td",null,(0,l.zw)(t.size.color_name),1),(0,s._)("td",null,(0,l.zw)(t.size.size),1),(0,s._)("td",y,[(0,s._)("button",{class:"btn btn-dark btn-sm p-0 my-1 q-btn",onClick:e=>n.enscreaseQuantity(t.id,t.quantity)},"+",8,h),(0,s._)("input",{id:"item_"+t.id,class:"m-1 quantity fw-light text-center",type:"number",min:"1",value:t.quantity},null,8,k),(0,s._)("button",{class:"btn btn-dark btn-sm p-0 my-1 q-btn",onClick:e=>n.decreaseQuantity(t.id,t.quantity)},"-",8,v)]),(0,s._)("td",null,(0,l.zw)(t.price)+" T ",1),t.off?((0,s.wg)(),(0,s.iD)("td",g,(0,l.zw)(t.price*t.off/100)+" T ",1)):((0,s.wg)(),(0,s.iD)("td",w)),(0,s._)("td",null,[(0,s._)("button",{class:"btn btn-dark btn-sm text-center p-0 bi bi-x q-btn",onClick:e=>n.removeItem(t.id)},null,8,f)])])))),128))])])):((0,s.wg)(),(0,s.iD)("p",q," سبد شما خالی است "))])]),(0,s._)("div",x,[0!=n.cart.items?((0,s.wg)(),(0,s.j4)(E,{key:0,to:"/products",class:"btn btn-sm btn-dark"},{default:(0,s.w5)((()=>[C])),_:1})):(0,s.kq)("",!0),0!=n.cart.items?((0,s.wg)(),(0,s.j4)(E,{key:1,to:"/confirm",class:"btn btn-sm btn-dark"},{default:(0,s.w5)((()=>[z])),_:1})):(0,s.kq)("",!0)])])])])])}var I=a(4870),E=a(5920),Q={name:"Cart",components:{App:E.Z},setup(){const t=(0,I.iH)({}),e=(0,I.iH)({});(0,s.bv)((()=>{a()}));const a=()=>{axios.get(E.Z.data().apiUrl+"/api/user/"+JSON.parse(localStorage.getItem("user")).id).then((a=>{t.value=a.data,localStorage.setItem("user",JSON.stringify(a.data)),a.data.allOrders.forEach((t=>{"سبد خرید"==t.status&&(e.value=t)})),console.log("ccc",e.value)})).catch()},l=t=>{axios.post(E.Z.data().apiUrl+"/api/remove/order/item/"+t,{order_item_id:t}).then((t=>{a()})).catch()},n=t=>{let s=e.value.items?.find((e=>e.id===t));s.quantity+=1,document.getElementById("item_"+t).value=s.quantity,i(t,s.quantity),setTimeout((()=>{a()}),300)},c=(t,s)=>{if(s>1){let s=e.value.items?.find((e=>e.id===t));s.quantity-=1,document.getElementById("item_"+t).value=s.quantity,i(t,s.quantity),setTimeout((()=>{a()}),300)}},i=(t,a)=>{axios.post(E.Z.data().apiUrl+"/api/item/quantity/update",{item_id:t,quantity:a}).then((t=>{200===t.status&&(e.value=t.data,document.getElementById("amount")&&(document.getElementById("amount").innerText=this.cart.amount))})).catch((t=>{console.error(t),console.error(t.data),console.error(t.message)}))};return{getData:a,user:t,cart:e,removeItem:l,enscreaseQuantity:n,decreaseQuantity:c,updateQuantity:i}}},T=a(89);const U=(0,T.Z)(Q,[["render",D],["__scopeId","data-v-3dc19a54"]]);var Z=U}}]);
//# sourceMappingURL=cart.272e4818.js.map