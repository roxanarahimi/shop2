"use strict";(self["webpackChunkshop2"]=self["webpackChunkshop2"]||[]).push([[535],{6150:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var s=o(3396);const a={class:"row justify-content-center mb-3"},l={class:"col-12 col-md-8 col-lg-5 my-5"},n={class:"card"},r={class:"card-body"},c=(0,s._)("div",{class:"text-start"},[(0,s._)("label",{class:"labels fw-bold text-black-50"},"ورود به سایت"),(0,s._)("hr",{class:"mb-4",style:{"margin-top":"-2px",color:"#dddddd"}})],-1),m=(0,s._)("p",{class:"small mb-0 w-100 text-start"}," لطفا جهت ورود به سایت، شماره موبایل خود را وارد کنید ",-1),i={class:"row pt-5 pb-4"},d={class:"col-12 mb-2 mb-4"},u=(0,s.uE)('<div class="col-3 mb-2 mb-3"><input type="text" minlength="1" maxlength="1" min="0" max="9" class="text-center form-control form-control-sm"></div><div class="col-3 mb-2 mb-3"><input type="text" minlength="1" maxlength="1" min="0" max="9" class="text-center form-control form-control-sm"></div><div class="col-3 mb-2 mb-3"><input type="text" minlength="1" maxlength="1" min="0" max="9" class="text-center form-control form-control-sm"></div><div class="col-3 mb-2 mb-3"><input type="text" minlength="1" maxlength="1" min="0" max="9" class="text-center form-control form-control-sm"></div>',4);function g(e,t,o,g,p,v){return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",l,[(0,s._)("div",n,[(0,s._)("div",r,[c,m,(0,s._)("div",i,[(0,s._)("div",d,[(0,s._)("input",{type:"text",placeholder:"0912 - - - - - - -",class:"text-end form-control form-control-sm",onInput:t[0]||(t[0]=(...e)=>v.submit&&v.submit(...e)),dir:"ltr",minlength:"11",maxlength:"11"},null,32)]),u])])])])])}var p={name:"Login",data(){return{errors:[]}},mounted(){localStorage.removeItem("user"),localStorage.removeItem("expire"),localStorage.removeItem("access_token"),document.getElementById("login").classList.remove("d-none"),document.getElementById("profile").classList.add("d-none"),document.getElementById("logout").classList.add("d-none"),document.getElementById("cart").classList.add("d-none")},methods:{submit(){localStorage.clear();let e=0,t=document.querySelectorAll("[required]");t.forEach((t=>{""===t.value?(t.classList.add("hasError"),t.nextSibling.innerHTML="فیلد اجباری",e++):(t.classList.remove("hasError"),t.nextSibling.innerHTML="")})),0===e&&(this.errors=[],axios.post(App.data().apiUrl+"/api/user/login",{username:document.querySelector("#username").value,password:document.querySelector("#password").value}).then((e=>{if(200===e.status&&"user"===e.data.user?.scope){async function t(){await localStorage.removeItem("admin"),await localStorage.setItem("access_token",e.data.access_token),await localStorage.setItem("user",JSON.stringify(e.data.user)),await localStorage.setItem("expire",e.data.expire),await document.getElementById("login").classList.add("d-none"),await document.getElementById("register").classList.add("d-none"),await document.getElementById("profile").classList.remove("d-none"),await document.getElementById("logout").classList.remove("d-none"),await document.getElementById("cart").classList.remove("d-none")}t(),App.methods.checkUser(),setTimeout((()=>{window.location="/"}),200)}else"admin"===e.data.user?.scope&&(document.getElementById("emailHelp").innerText="کاربر مجاز نیست. لطفا با ایمیل دیگری ثبت نام کنید.")})).catch((e=>{if(console.log(e),422===e.status){let o=Array(e.response.data);console.log(e.response.data);for(var t=0;t<o.length;t++)console.log("i",o[t]),this.errors=o[t]}else console.log(e)})))}}},v=o(89);const x=(0,v.Z)(p,[["render",g]]);var h=x}}]);
//# sourceMappingURL=login.0318eece.js.map