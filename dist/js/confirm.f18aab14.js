"use strict";(self["webpackChunkshop2"]=self["webpackChunkshop2"]||[]).push([[368],{22:function(a,d,t){t.r(d),t.d(d,{default:function(){return P}});var l=t(3396),s=t(7139);const e=a=>((0,l.dD)("data-v-3878d54a"),a=a(),(0,l.Cn)(),a),o={class:"row"},r={class:"col-xl-8 mb-3"},c={class:"card"},i={class:"card-body"},n=e((()=>(0,l._)("div",{class:"text-start mb-3"},[(0,l._)("label",{class:"labels fw-bold text-black-50"},"فاکتور خرید"),(0,l._)("hr",{class:"mb-4",style:{"margin-top":"-2px",color:"#dddddd"}})],-1))),v={class:"row"},m={class:"col-12 table-responsive px-md-5"},b={class:"table text-start"},u={style:{width:"120px"}},p=["src"],f={style:{direction:"rtl"}},_={class:"fw-bold"},y=(0,l.Uk)(" - "),h={style:{width:"50px"}},w={key:0},x={key:1},g={class:"border-top"},k=e((()=>(0,l._)("td",{class:"fw-bold pt-5",colspan:"2"},[(0,l._)("i",{class:"bi bi-heart-fill",style:{color:"hotpink"}}),(0,l.Uk)(" با تشکر از خرید شما ")],-1))),z={class:"fw-bold pt-5",colspan:"4"},A=e((()=>(0,l._)("p",{class:""}," هزینه ارسال : 15000 ",-1))),E={class:"mb-0"},I={class:"col-xl-4 mb-3"},q={class:"card"},B={class:"card-body"},D=e((()=>(0,l._)("div",{class:"text-start mb-3"},[(0,l._)("label",{class:"labels fw-bold text-black-50"},"نشانی پستی"),(0,l._)("hr",{class:"mb-4",style:{"margin-top":"-2px",color:"#dddddd"}})],-1))),H={class:"row"},O={class:"row"},T={class:"col-8 mb-3 text-start"},C=["selected","value"],S=e((()=>(0,l._)("div",{class:"form-text error"},null,-1))),Y=e((()=>(0,l._)("p",{id:"stateAdd"},null,-1))),J=e((()=>(0,l._)("p",{id:"cityAdd"},null,-1))),K=e((()=>(0,l._)("p",{id:"codeAdd"},null,-1))),N=e((()=>(0,l._)("p",{id:"addAdd"},null,-1))),U={class:"col-12"},L=(0,l.uE)('<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" data-v-3878d54a><div class="modal-dialog modal-dialog-centered modal-xl" data-v-3878d54a><div class="modal-content" data-v-3878d54a><div class="modal-body pb-0" data-v-3878d54a><div class="mb-3" data-v-3878d54a><div class="card" data-v-3878d54a><div class="card-body pb-0" data-v-3878d54a><div class="text-start mb-3" data-v-3878d54a><label class="labels fw-bold text-black-50" data-v-3878d54a>ثبت نشانی جدید</label><hr class="mb-4" style="margin-top:-2px;color:#dddddd;" data-v-3878d54a><div data-v-3878d54a><div class="row" data-v-3878d54a><div class="col-3" data-v-3878d54a><label for="title" class="form-label" data-v-3878d54a>عنوان</label><input type="text" class="form-control form-control-sm" id="title" required="" data-v-3878d54a><div class="form-text error" data-v-3878d54a></div></div><div class="col-3" data-v-3878d54a><label for="state" class="form-label" data-v-3878d54a>استان</label><input type="text" class="form-control form-control-sm" id="state" required="" data-v-3878d54a><div class="form-text error" data-v-3878d54a></div></div><div class="col-3" data-v-3878d54a><label for="city" class="form-label" data-v-3878d54a>شهر</label><input type="text" class="form-control form-control-sm" id="city" required="" data-v-3878d54a><div class="form-text error" data-v-3878d54a></div></div><div class="col-3" data-v-3878d54a><label for="postal_code" class="form-label" data-v-3878d54a>کد پستی</label><input type="text" class="form-control form-control-sm" id="postal_code" required="" data-v-3878d54a><div class="form-text error" data-v-3878d54a></div></div><div class="my-2 col-12" data-v-3878d54a><label for="address" class="form-label" data-v-3878d54a>نشانی</label><textarea class="form-control form-control-sm" id="address" rows="2" required="" data-v-3878d54a></textarea><div class="form-text error" data-v-3878d54a></div></div></div></div></div><div class="row" data-v-3878d54a></div></div></div></div></div><div class="modal-footer border-0" data-v-3878d54a><button class="btn btn-sm btn-dark" data-bs-dismiss="modal" data-v-3878d54a>ثبت نشانی</button><button class="btn btn-sm btn-secondary" data-bs-dismiss="modal" data-v-3878d54a>انصراف</button></div></div></div></div>',1);function Z(a,d,t,e,Z,j){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",o,[(0,l._)("div",r,[(0,l._)("div",c,[(0,l._)("div",i,[n,(0,l._)("div",v,[(0,l._)("div",m,[(0,l._)("table",b,[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cart.items,(a=>((0,l.wg)(),(0,l.iD)("tr",null,[(0,l._)("td",u,[(0,l._)("img",{style:{width:"120px",height:"auto"},src:"http://localhost:8000"+a.product.images[0],alt:""},null,8,p)]),(0,l._)("td",f,[(0,l._)("div",null,[(0,l._)("p",_,(0,s.zw)(a.product.title),1),(0,l._)("small",null,(0,s.zw)(a.size.size),1),y,(0,l._)("small",null,(0,s.zw)(a.size.color_name),1)])]),(0,l._)("td",h,(0,s.zw)(a.quantity),1),(0,l._)("td",null,(0,s.zw)(a.price)+"T",1),a.off?((0,l.wg)(),(0,l.iD)("td",w,(0,s.zw)(a.price*a.off/100*-1)+"T",1)):((0,l.wg)(),(0,l.iD)("td",x)),(0,l._)("td",null,(0,s.zw)(a.quantity*a.price*(1-a.off/100))+" T",1)])))),256)),(0,l._)("tr",g,[k,(0,l._)("td",z,[(0,l._)("p",null," تخفیف : "+(0,s.zw)(e.off),1),A,(0,l._)("p",E," پرداخت شما : "+(0,s.zw)(e.cart.amount),1)])])])])])])])])]),(0,l._)("div",I,[(0,l._)("div",q,[(0,l._)("div",B,[D,(0,l._)("div",H,[(0,l._)("div",O,[(0,l._)("div",T,[(0,l._)("select",{class:"form-select form-select-sm",id:"address1",required:"",onChange:d[0]||(d[0]=(...a)=>e.showAdd&&e.showAdd(...a))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.user.addresses,(a=>((0,l.wg)(),(0,l.iD)("option",{selected:a.id==e.cart.address_id,value:a.id},(0,s.zw)(a.title),9,C)))),256))],32),S]),Y,J,K,N])])])])]),(0,l._)("div",U,[(0,l._)("button",{class:"bn btn-lg btn-dark mb-3",onClick:d[1]||(d[1]=a=>e.payOrder(e.cart.id))},"تایید و پرداخت")])]),L],64)}var j=t(4870),F={name:"Confirm",setup(){const a=(0,j.iH)({}),d=(0,j.iH)({}),t=(0,j.iH)(0),s=(0,j.iH)({});(0,l.bv)((()=>{e()}));const e=()=>{axios.get("http://localhost:8000/api/user/"+JSON.parse(localStorage.getItem("user")).id).then((t=>{a.value=t.data,localStorage.setItem("user",JSON.stringify(t.data)),console.log(t.data),console.log(t.data.allOrders),t.data.allOrders.forEach((a=>{"سبد خرید"==a.status&&(d.value=a)}))})).then((()=>{o();let a=0;d.value.items.forEach((d=>{let t=d.quantity*d.price*d.off/100;a+=t})),t.value=a,console.log(t.value,amount.value)})).catch()},o=()=>{axios.get("http://localhost:8000/api/address/user/"+document.getElementById("address1").value).then((a=>{console.log(a.data);let d=a.data;document.getElementById("stateAdd").innerText=d.city.state.name,document.getElementById("cityAdd").innerText=d.city.name,document.getElementById("codeAdd").innerText="کد پستی "+d.postal_code,document.getElementById("addAdd").innerText=d.address})).then((()=>{r()})).catch(),console.log("add",document.getElementById("address1").value)},r=()=>{axios.post("http://localhost:8000/api/order/"+d.value.id,{user_address_id:document.getElementById("address1").value}).then((a=>{console.log(a.data)})).catch()},c=a=>{axios.post("http://localhost:8000/api/pay/order/"+a).then((a=>{console.log(a.data),window.location=a.data.url}))};return{getData:e,user:a,cart:d,address:s,showAdd:o,updateOrderAdd:r,off:t,payOrder:c}}},G=t(89);const M=(0,G.Z)(F,[["render",Z],["__scopeId","data-v-3878d54a"]]);var P=M}}]);
//# sourceMappingURL=confirm.f18aab14.js.map