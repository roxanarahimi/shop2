{"version":3,"file":"js/login.0318eece.js","mappings":"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","sources":["webpack://shop2/./src/views/Login.vue","webpack://shop2/./src/views/Login.vue?240b"],"sourcesContent":["<template>\r\n\r\n  <div class=\"row  justify-content-center mb-3\">\r\n    <div class=\"col-12 col-md-8 col-lg-5  my-5\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"text-start \">\r\n            <label class=\"labels fw-bold text-black-50\">ورود به سایت</label>\r\n            <hr class=\" mb-4\" style=\"margin-top: -2px;color: #dddddd\">\r\n          </div>\r\n          <p class=\"small mb-0 w-100 text-start\">\r\n            لطفا جهت ورود به سایت، شماره موبایل خود را وارد کنید\r\n          </p>\r\n          <div class=\"row pt-5 pb-4 \">\r\n            <div class=\"col-12 mb-2 mb-4\">\r\n              <input type=\"text\" placeholder=\"0912 - - - - - - -\" class=\"text-end form-control form-control-sm\"\r\n                 @input=\"submit\"    dir=\"ltr\" minlength=\"11\" maxlength=\"11\">\r\n            </div>\r\n            <div class=\"col-3 mb-2 mb-3\">\r\n              <input type=\"text\" minlength=\"1\" maxlength=\"1\" min=\"0\" max=\"9\"\r\n                     class=\"text-center form-control form-control-sm\">\r\n            </div>\r\n            <div class=\"col-3 mb-2 mb-3\">\r\n              <input type=\"text\" minlength=\"1\" maxlength=\"1\" min=\"0\" max=\"9\"\r\n                     class=\"text-center form-control form-control-sm\">\r\n            </div>\r\n            <div class=\"col-3 mb-2 mb-3\">\r\n              <input type=\"text\" minlength=\"1\" maxlength=\"1\" min=\"0\" max=\"9\"\r\n                     class=\"text-center form-control form-control-sm\">\r\n            </div>\r\n            <div class=\"col-3 mb-2 mb-3\">\r\n              <input type=\"text\" minlength=\"1\" maxlength=\"1\" min=\"0\" max=\"9\"\r\n                     class=\"text-center form-control form-control-sm\">\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      errors: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    // document.querySelector('title').innerHTML = 'ورود | roxi shop';\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('expire');\r\n    localStorage.removeItem('access_token');\r\n\r\n    document.getElementById('login').classList.remove('d-none');\r\n    // document.getElementById('register').classList.remove('d-none');\r\n    document.getElementById('profile').classList.add('d-none');\r\n    document.getElementById('logout').classList.add('d-none');\r\n    document.getElementById('cart').classList.add('d-none');\r\n\r\n  },\r\n  methods: {\r\n    submit() {\r\n      localStorage.clear();\r\n      let emptyFieldsCount = 0;\r\n      let req = document.querySelectorAll('[required]');\r\n      req.forEach((element) => {\r\n        if (element.value === \"\") {\r\n          element.classList.add('hasError');\r\n          element.nextSibling.innerHTML = \"فیلد اجباری\";\r\n          emptyFieldsCount++;\r\n        } else {\r\n          element.classList.remove('hasError');\r\n          element.nextSibling.innerHTML = \"\";\r\n        }\r\n      });\r\n      if (emptyFieldsCount === 0) {\r\n        this.errors = [];\r\n        axios.post(App.data().apiUrl+'/api/user/login', {\r\n          username: document.querySelector('#username').value,\r\n          password: document.querySelector('#password').value,\r\n        })\r\n            .then((response) => {\r\n              if (response.status === 200 && response.data.user?.scope === 'user') {\r\n                //enter\r\n                async function jobs() {\r\n                  await localStorage.removeItem('admin');\r\n                  await localStorage.setItem('access_token', response.data.access_token);\r\n                  await localStorage.setItem('user', JSON.stringify(response.data.user));\r\n                  await localStorage.setItem('expire', response.data.expire);\r\n                  await document.getElementById('login').classList.add('d-none');\r\n                  await document.getElementById('register').classList.add('d-none');\r\n                  await document.getElementById('profile').classList.remove('d-none');\r\n                  await document.getElementById('logout').classList.remove('d-none');\r\n                  await document.getElementById('cart').classList.remove('d-none');\r\n                }\r\n\r\n                jobs();\r\n                App.methods.checkUser();\r\n                setTimeout(() => {\r\n                  window.location = '/';\r\n                }, 200);\r\n\r\n              }else if(response.data.user?.scope === 'admin'){\r\n                document.getElementById('emailHelp').innerText = 'کاربر مجاز نیست. لطفا با ایمیل دیگری ثبت نام کنید.';\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n              if (error.status === 422) {\r\n                let errorList = Array(error.response.data);\r\n                console.log(error.response.data);\r\n                for (var i = 0; i < errorList.length; i++) {\r\n                  console.log('i', errorList[i]);\r\n                  this.errors = errorList[i];\r\n                }\r\n              } else {\r\n                console.log(error);\r\n              }\r\n              // console.log('errs:', this.errors);\r\n            })\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=4c632a64\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\PROJECTS\\\\2022\\\\shop2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_createElementBlock","_hoisted_5","_hoisted_6","type","placeholder","onInput","$options","dir","minlength","maxlength","_hoisted_9","name","data","errors","mounted","localStorage","removeItem","document","getElementById","classList","remove","add","methods","submit","clear","emptyFieldsCount","req","querySelectorAll","forEach","element","value","nextSibling","innerHTML","this","axios","post","App","apiUrl","username","querySelector","password","then","response","status","user","scope","async","jobs","setItem","access_token","JSON","stringify","expire","checkUser","setTimeout","window","location","innerText","catch","error","console","log","errorList","Array","i","length","__exports__","render"],"sourceRoot":""}